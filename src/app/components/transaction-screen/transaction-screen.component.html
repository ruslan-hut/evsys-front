<mat-card>
  <mat-card-content class="info-container">
    @if (transaction) {
      <div class="info-item">
        <span class="info-label">{{ transaction.charge_point_title}}</span>
      </div>
      <div class="info-item">
        <span class="info-value">{{ transaction.charge_point_address }}</span>
      </div>
      @if (chargePoint) {
        <div class="info-item">
          <span class="info-value">{{chargePoint.description}}</span>
        </div>
      }
      <div class="info-item">
        <span class="info-label">Status:</span>
        <span class="info-value">{{ transaction.status }}</span>
      </div>
      @if (isCharging()) {
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      } @else {
        <mat-progress-bar mode="determinate" [value]="0"></mat-progress-bar>
      }
      <div class="info-item">
        <span class="info-label">Start time:</span>
        <span class="info-value">{{ transaction.time_started | date:"HH:mm"}}</span>
      </div>
      <div class="info-item">
        <span class="info-label">Duration:</span>
        <span class="info-value">{{ getDuration()}}</span>
      </div>
      <div class="info-item">
        <span class="info-label">Power:</span>
        <span class="info-value">{{ transaction.power_rate /1000 | number: '1.1-1'}} kW</span>
      </div>
      <div class="info-item">
        <span class="info-label">Consumed:</span>
        <span class="info-value">{{ transaction.consumed /1000 | number: '1.2-2'}} kWh</span>
      </div>
      @if ((canStop|| accountService.isAdmin || accountService.isOperator)) {
        <div class="info-item">
          <span class="info-label">Price:</span>
          <span class="info-value">{{ transaction.price/100 | number: '1.2-2'}} â‚¬</span>
        </div>
      }
      @if (transaction.battery) {
        <div class="info-item">
          <span class="info-label">Battery:</span>
          <span class="info-value">{{ transaction.battery | number}} %</span>
        </div>
      }
      @if (transactionService.isWaiting) {
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      }
      @if (!transactionService.isWaiting && (canStop || accountService.isAdmin || accountService.isOperator)) {
        <button mat-flat-button  color="accent" (click)="stop()" [disabled]="stopButtonIsDisabled">Stop</button>
      }
    }
    @if (!transaction) {
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    }
  </mat-card-content>

  <mat-card-actions class="flex-container">
    <button mat-stroked-button (click)="close()">Close</button>
    <div class="flex-spacer"></div>
    @if (chargePoint) {
      @if (chargePoint.is_online) {
        <mat-icon class="online-status">cloud_queue</mat-icon>
      } @else {
        <mat-icon color="warn">cloud_off</mat-icon>
      }
    }

  </mat-card-actions>
</mat-card>


